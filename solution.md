# Решение за X место
Прежде всего, мы очень рады быть частью такого глубокого и интересного конкурса, огромное спасибо организаторам за поддержку и всем конкурсантам, которые самоотверженно делились своими знаниями и инсайтами.

Большое спасибо моей замечательной команде QuData в лице @kerrit! Мы находимся и работаем в Украине и хотим поблагодарить всех, кто сейчас поддерживает народ Украины!

## Описание решения

* [Здесь](https://github.com/BooCreator/Lux-AI-Season-2-Strategy-Library) можно посмотреть полный код решения GitHub
* [Здесь](https://github.com/BooCreator/Lux-AI-Season-2-Strategy-Library/tree/main/strategy) находится реализация библиотеки решения
* [Здесь](https://github.com/BooCreator/Lux-AI-Season-2-Strategy-Library/tree/main/bots) находится реализация последних загруженных ботов

Решение представляет собой библиотеку из нескольких стратегий для различных стадий игры и действующих юнитов, а также некоторых всппомогательных функций.
Каждая стратегия - это набор правил, на основе которых строится поведение роботов и фабрик.

В основе решения лежит класс **DefaultStrategy** из файла basic.py. Он имеет набор обязательных методов для реализации полноценной стратегии игры, в частности:
* *getBid(...)* - выбор ставки
* *getSpawnPos(...)* - выбор позиции фабрики
* *getActions(...)* - определений действий для фабрик и роботов

Внутри класса **DefaultStrategy** может быть реализована полноценная стратегия.

Далее стратегия **DefaultStrategy** разбивается на две группы **Early** и **Game**.

### Early стратегии

**Early** стратегии - это стратегии фазы расстановки фабрик.
Каждая из стратегий имеет набор обязательных методов для реализиции стратегии для фазы игры, в частности:
* *getBid(...)* - выбор ставки
* *getSpawnPos(...)* - выбор позиции фабрики

Всего было реализовано 6 стратегий, распологаемых в сответствующих файлах.
* *default* - Базовая стратегия библиотеки расстановки фабрик. Позиция для фабрики выбирается случайно на основе ранее составленной матрицы весов. Подробный алгоритм составления матрицы весов описан [тут](TODO).
* *from_kaggle_strategy* - Эта стратегия является расширением *default*. В стратегии для расчёта весов используются алгоритмы из ноутбука [@istinetz](https://www.kaggle.com/code/istinetz/picking-a-good-starting-location).
* *best_strategy* - Данная стратегия является улучшением *default* в части выбора позиции. Самым важным изменением было устранение случайности при выборе позиции. В данной стратегии позиция фабрики выбирается на основе кличества щебня в квадрате 3x3 вокруг точки. Кроме этого были немного изменены коэффициенты матрицы весов.
* *single_strategy* - Стратегия для тестового обучения RL модели. Основанна на *best_strategy*. Отличительной особенностью является то, что в стратегии выставляется только одна фабрика.
* *new_from_kaggle* - Стратегия использующая алгоритмы из ноутбука [@istinetz](https://www.kaggle.com/code/istinetz/picking-a-good-starting-location). Отличительной особенностью является то, что в качестве весов используется отношение общего количества ячеек к "плохим" (> 25) ячейкам.
* *next_generation* - Последняя и, по тестам, лучшая стратегия из реализованных в библиотеке. В стратегии расчитываются отдельные матрицы весов для льда и руды, а при выборе позиции фабрики учитывается количество щебня в кварате 7x7 вокруг точки. Кроме этого, в случае, если все лучшие позиции, примыкающие к льду, заняты, матрица весов для льда пересчитывается.

### Game стратегии

**Game** стратегии - это стратегии фазы игры, которые разбиваются на две группы **Factory** и **Robot**.

#### Factory стратегии

**Factory** стратегии - это стратегии работы фабрик.
